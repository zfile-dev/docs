# Docker

Docker é•œåƒæ‰˜ç®¡åœ¨ DockerHubï¼šhttps://hub.docker.com/r/zhaojun1998/zfile-pro

## å‰è¨€

- è´­ä¹°æèµ ç‰ˆå¯ä»¥ä¸Š https://www.zfile.vip/pricing æŸ¥çœ‹åŠŸèƒ½ä»‹ç»å¹¶è´­ä¹°.
- ZFile Pro æ”¯æŒä» 4.x å…¼å®¹å‡çº§ï¼Œ<span className={"text-red-500"}>ä¸æ”¯æŒä» 3.x æˆ–æ›´æ—©çš„ç‰ˆæœ¬å¸¦æ•°æ®å‡çº§</span>.
- é•œåƒåœ°å€ä¸ºï¼šhttps://hub.docker.com/r/zhaojun1998/zfile-pro

<span className={"font-bold"}>tipsï¼šå¦‚ä»å¼€æºç‰ˆ 4.x ç‰ˆæœ¬å‡çº§åˆ°çš„æèµ ç‰ˆï¼Œæƒ³è¦ä¿ç•™ä¹‹å‰çš„æ•°æ®ï¼Œéœ€å°†ä¸‹æ–‡ä¸­çš„ `/root/zfile-pro/db:/root/.zfile-v4/db` ä¸­çš„å·¦ä¾§ `/root/zfile-pro/db` ä¿®æ”¹ä¸º `/root/zfile-pro/db`ï¼Œå¦åˆ™ä¼šåˆ›å»ºæ–°çš„æ•°æ®åº“.</span>

## Docker

### å®‰è£…ä»‹ç»

:::tip é…ç½®è¯´æ˜

ä¸‹æ–¹é«˜äº®éƒ¨åˆ†ï¼Œå¯è‡ªå®šä¹‰ç«¯å£å’Œæ•°æ®ç›®å½•ï¼š

- ç«¯å£å·ï¼šç¬¬ 2 è¡Œ**å†’å·**å·¦ä¾§çš„ `8080` è¡¨ç¤ºå¯¹å¤–æš´éœ²çš„ç«¯å£å·ï¼Œå¦‚å…¶ä»–ç¨‹åºå ç”¨ï¼Œåˆ™è¯·ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·ã€‚
- æ•°æ®ç›®å½•ï¼šç¬¬ 5 è¡Œçš„ `-v /root/zfile-pro/file:/data/file \` ä¸ºæ˜ å°„å®¿ä¸»æœºæ–‡ä»¶å¤¹ `/root/zfile-pro/file` åˆ°å®¹å™¨å†…çš„ `/data/file` æ–‡ä»¶å¤¹ï¼Œè¿™æ ·éœ€è¦åœ¨ ZFile æ·»åŠ æœ¬åœ°å­˜å‚¨æ—¶ï¼Œå¡«å†™å®¹å™¨å†…ç›®å½• `/data/file` å°±ç­‰åŒäºè®¿é—®å®¿ä¸»æœºçš„ `/root/zfile-pro/file` ç›®å½•äº†ã€‚ è¿™ä¸€è¡ŒæŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹ï¼Œå¦‚æœä¸éœ€è¦æ˜ å°„æœ¬åœ°å­˜å‚¨ï¼Œåˆ™å¯ä»¥åˆ é™¤è¿™ä¸€è¡Œã€‚

:::

```bash showLineNumbers {2,5}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    zhaojun1998/zfile-pro
```

### é…ç½®æ–‡ä»¶æ˜ å°„ {#config}

**å¦‚éœ€æ˜ å°„é…ç½®æ–‡ä»¶**åˆ™éœ€è¦å…ˆåœ¨å®¿ä¸»æœºä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åæ˜ å°„åˆ°å®¹å™¨å†…:
ä¸‹è½½ [`application.properties`](https://c.jun6.net/ZFILE-PRO/application.properties) æ–‡ä»¶åˆ° `/root` ç›®å½•ä¸‹, æ­¤ç›®å½•å¯è‡ªè¡Œæ›´æ”¹, å‘½ä»¤å¦‚:

```bash showLineNumbers
curl -k -o /root/application.properties https://c.jun6.net/ZFILE-PRO/application.properties
```

**ç„¶åå¢åŠ ä¸€ä¸ª `-v` å‚æ•°(è§ä¸‹é¢å€’æ•°ç¬¬äºŒè¡Œ)ï¼Œå°†æ­¤æºæ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨å†…ï¼ˆå¦‚ä¿®æ”¹å®¿ä¸»æœºçš„ `application.properties` ä¸ºå…¶ä»–è·¯å¾„, åˆ™ä¸‹é¢å‘½ä»¤ä¹Ÿè¦ä¸€èµ·ä¿®æ”¹ï¼‰, å¦‚:**

> æç¤º: å¯åŠ¨å®¹å™¨åæ— æ³•ä¿®æ”¹æ–‡ä»¶æ˜ å°„ï¼Œéœ€å…ˆ `docker rm -f zfile-pro` åˆ é™¤å®¹å™¨ï¼Œå†é‡æ–°è¿è¡Œå‘½ä»¤.

```bash showLineNumbers {6}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    -v /root/application.properties:/root/application.properties \
    zhaojun1998/zfile-pro
```


## Docker Compose


### å®‰è£…ä»‹ç»

:::tip é…ç½®è¯´æ˜

ä¸‹æ–¹é«˜äº®éƒ¨åˆ†ï¼Œå¯è‡ªå®šä¹‰ç«¯å£å’Œæ•°æ®ç›®å½•ï¼š

- ç«¯å£å·ï¼šç¬¬ 7 è¡Œ**å†’å·**å·¦ä¾§çš„ `8080` è¡¨ç¤ºå¯¹å¤–æš´éœ²çš„ç«¯å£å·ï¼Œå¦‚å…¶ä»–ç¨‹åºå ç”¨ï¼Œåˆ™è¯·ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·ã€‚
- æ•°æ®ç›®å½•ï¼šç¬¬ 11 è¡Œçš„ `- '/root/zfile-pro/file:/data/file'` ä¸ºæ˜ å°„å®¿ä¸»æœºæ–‡ä»¶å¤¹ `/root/zfile-pro/file` åˆ°å®¹å™¨å†…çš„ `/data/file` æ–‡ä»¶å¤¹ï¼Œè¿™æ ·éœ€è¦åœ¨ ZFile æ·»åŠ æœ¬åœ°å­˜å‚¨æ—¶ï¼Œå¡«å†™å®¹å™¨å†…ç›®å½• `/data/file` å°±ç­‰åŒäºè®¿é—®å®¿ä¸»æœºçš„ `/root/zfile-pro/file` ç›®å½•äº†ã€‚ è¿™ä¸€è¡ŒæŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹ï¼Œå¦‚æœä¸éœ€è¦æ˜ å°„æœ¬åœ°å­˜å‚¨ï¼Œåˆ™å¯ä»¥åˆ é™¤è¿™ä¸€è¡Œã€‚

:::

```yml showLineNumbers {7,11}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
        image: zhaojun1998/zfile-pro
```

### é…ç½®æ–‡ä»¶æ˜ å°„ {#config2}

**å¦‚éœ€æ˜ å°„é…ç½®æ–‡ä»¶**åˆ™éœ€è¦å…ˆåœ¨å®¿ä¸»æœºä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åæ˜ å°„åˆ°å®¹å™¨å†…:
ä¸‹è½½ [`application.properties`](https://c.jun6.net/ZFILE-PRO/application.properties) æ–‡ä»¶åˆ° `/root` ç›®å½•ä¸‹, æ­¤ç›®å½•å¯è‡ªè¡Œæ›´æ”¹, å‘½ä»¤å¦‚:

```bash showLineNumbers
curl -k -o /root/application.properties https://c.jun6.net/ZFILE-PRO/application.properties
```

**ç„¶åå¢åŠ ä¸€ä¸ª `-v` å‚æ•°(è§ä¸‹é¢å€’æ•°ç¬¬äºŒè¡Œ)ï¼Œå°†æ­¤æºæ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨å†…ï¼ˆå¦‚ä¿®æ”¹å®¿ä¸»æœºçš„ `application.properties` ä¸ºå…¶ä»–è·¯å¾„, åˆ™ä¸‹é¢å‘½ä»¤ä¹Ÿè¦ä¸€èµ·ä¿®æ”¹ï¼‰, å¦‚:**

> æç¤º: å¯åŠ¨å®¹å™¨åæ— æ³•ä¿®æ”¹æ–‡ä»¶æ˜ å°„ï¼Œéœ€å…ˆ `docker rm -f zfile-pro` åˆ é™¤å®¹å™¨ï¼Œå†é‡æ–°è¿è¡Œå‘½ä»¤.

```yml showLineNumbers {12}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
            - '/root/application.properties:/root/application.properties'
        image: zhaojun1998/zfile-pro
```

-----


## æ›´æ–°ç‰ˆæœ¬

### æ‰‹åŠ¨æ›´æ–°

> å•æ¬¡æ‰‹åŠ¨æ›´æ–°åç§°ä¸º `zfile-pro` çš„å®¹å™¨

```bash showLineNumbers
docker run --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower \
    --cleanup \
    --run-once \
    zfile-pro
```

### è‡ªåŠ¨æ›´æ–°

> æ¯ 3600 ç§’ ï¼ˆ1å°æ—¶ï¼‰è‡ªåŠ¨æ£€æµ‹æ›´æ–°åç§°ä¸º `zfile-pro` çš„å®¹å™¨

```bash showLineNumbers
docker run -d \
    --name watchtower \
    --restart always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower \
    --cleanup \
    zfile-pro \
    -i 3600
```

## å¸®æˆ‘å®‰è£…ğŸ”
[æŠ€æœ¯æ”¯æŒ](/support/)
