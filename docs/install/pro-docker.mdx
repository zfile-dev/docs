import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import TOCInline from '@theme/TOCInline';

# Docker

Docker é•œåƒæ‰˜ç®¡åœ¨ DockerHubï¼šhttps://hub.docker.com/r/zhaojun1998/zfile-pro ä¸‹æ–‡ä¹Ÿæä¾›äº†åä¸ºäº‘é•œåƒåœ°å€ã€‚

<TOCInline toc={toc} />

## å‰è¨€

- è´­ä¹°æèµ ç‰ˆå¯ä»¥ä¸Š https://www.zfile.vip/pricing æŸ¥çœ‹åŠŸèƒ½ä»‹ç»å¹¶è´­ä¹°.
- ZFile Pro æ”¯æŒä» 4.x å…¼å®¹å‡çº§ï¼Œ<span className={"text-red-500"}>ä¸æ”¯æŒä» 3.x æˆ–æ›´æ—©çš„ç‰ˆæœ¬å¸¦æ•°æ®å‡çº§</span>.

<span className={"font-bold"}>tipsï¼šå¦‚ä»å¼€æºç‰ˆ 4.x ç‰ˆæœ¬å‡çº§åˆ°çš„æèµ ç‰ˆï¼Œæƒ³è¦ä¿ç•™ä¹‹å‰çš„æ•°æ®ï¼Œéœ€æ³¨æ„æ•°æ®åº“ç›®å½•ï¼Œå¼€æºç‰ˆ Docker æ–‡æ¡£é»˜è®¤åœ¨å®¿ä¸»æœºçš„ `/root/zfile/db` ç›®å½•ï¼Œæèµ ç‰ˆåœ¨ `/root/zfile-pro/db` ç›®å½•ï¼Œæ³¨æ„å°†å‰è€…æ•°æ®è¿ç§»è¿‡æ¥ã€‚</span>

## Docker

### å®‰è£…ä»‹ç»

:::tip é…ç½®è¯´æ˜

ä¸‹æ–¹é«˜äº®éƒ¨åˆ†ï¼Œå¯è‡ªå®šä¹‰ç«¯å£å’Œæ•°æ®ç›®å½•ï¼š

- ç«¯å£å·ï¼šç¬¬ 2 è¡Œ**å†’å·**å·¦ä¾§çš„ `8080` è¡¨ç¤ºå¯¹å¤–æš´éœ²çš„ç«¯å£å·ï¼Œå¦‚å…¶ä»–ç¨‹åºå ç”¨ï¼Œåˆ™è¯·ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·ã€‚
- æ•°æ®ç›®å½•ï¼šç¬¬ 5 è¡Œçš„ `-v /root/zfile-pro/file:/data/file \` ä¸ºæ˜ å°„å®¿ä¸»æœºæ–‡ä»¶å¤¹ `/root/zfile-pro/file` åˆ°å®¹å™¨å†…çš„ `/data/file` æ–‡ä»¶å¤¹ï¼Œè¿™æ ·éœ€è¦åœ¨ ZFile æ·»åŠ æœ¬åœ°å­˜å‚¨æ—¶ï¼Œå¡«å†™å®¹å™¨å†…ç›®å½• `/data/file` å°±ç­‰åŒäºè®¿é—®å®¿ä¸»æœºçš„ `/root/zfile-pro/file` ç›®å½•äº†ã€‚ è¿™ä¸€è¡ŒæŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹ï¼Œå¦‚æœä¸éœ€è¦æ˜ å°„æœ¬åœ°å­˜å‚¨ï¼Œåˆ™å¯ä»¥åˆ é™¤è¿™ä¸€è¡Œã€‚
    - å¦‚æœæ˜¯ Windowsï¼Œå†’å·å·¦è¾¹å¯ä»¥å¸¦ç›˜ç¬¦ï¼Œå¦‚ `D:/zfile/file:/data/file`ã€‚

:::


<Tabs groupId="image-src">
    <TabItem value="dockerhub" label="DockerHub">
```bash showLineNumbers {2,5}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    zhaojun1998/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-bj" label="åŒ—äº¬é•œåƒ">
```bash showLineNumbers {2,5}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    swr.cn-north-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-hk" label="é¦™æ¸¯é•œåƒ">
```bash showLineNumbers {2,5}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    swr.ap-southeast-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>
</Tabs>




### é…ç½®æ–‡ä»¶æ˜ å°„ {#config}

**å¦‚éœ€æ˜ å°„é…ç½®æ–‡ä»¶**åˆ™éœ€è¦å…ˆåœ¨å®¿ä¸»æœºä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åæ˜ å°„åˆ°å®¹å™¨å†…:
ä¸‹è½½ [`application.properties`](https://c.jun6.net/ZFILE-PRO/application.properties) æ–‡ä»¶åˆ° `/root` ç›®å½•ä¸‹, æ­¤ç›®å½•å¯è‡ªè¡Œæ›´æ”¹, å‘½ä»¤å¦‚:

```bash showLineNumbers
curl -k -o /root/application.properties https://c.jun6.net/ZFILE-PRO/application.properties
```

**ç„¶åå¢åŠ ä¸€ä¸ª `-v` å‚æ•°(è§ä¸‹é¢å€’æ•°ç¬¬äºŒè¡Œ)ï¼Œå°†æ­¤æºæ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨å†…ï¼ˆå¦‚ä¿®æ”¹å®¿ä¸»æœºçš„ `application.properties` ä¸ºå…¶ä»–è·¯å¾„, åˆ™ä¸‹é¢å‘½ä»¤ä¹Ÿè¦ä¸€èµ·ä¿®æ”¹ï¼‰, å¦‚:**

> æç¤º: å¯åŠ¨å®¹å™¨åæ— æ³•ä¿®æ”¹æ–‡ä»¶æ˜ å°„ï¼Œéœ€å…ˆ `docker rm -f zfile-pro` åˆ é™¤å®¹å™¨ï¼Œå†é‡æ–°è¿è¡Œå‘½ä»¤.

<Tabs groupId="image-src">
    <TabItem value="dockerhub" label="DockerHub">
```bash showLineNumbers {6}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    -v /root/application.properties:/root/application.properties \
    zhaojun1998/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-bj" label="åŒ—äº¬é•œåƒ">
```bash showLineNumbers {6}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    -v /root/application.properties:/root/application.properties \
    swr.cn-north-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-hk" label="é¦™æ¸¯é•œåƒ">
```bash showLineNumbers {6}
docker run -d --name=zfile-pro --restart=always \
    -p 8080:8080 \
    -v /root/zfile-pro/db:/root/.zfile-v4/db \
    -v /root/zfile-pro/logs:/root/.zfile-v4/logs \
    -v /root/zfile-pro/file:/data/file \
    -v /root/application.properties:/root/application.properties \
    swr.ap-southeast-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>
</Tabs>

## Docker Compose


### å®‰è£…ä»‹ç»

:::tip é…ç½®è¯´æ˜

ä¸‹æ–¹é«˜äº®éƒ¨åˆ†ï¼Œå¯è‡ªå®šä¹‰ç«¯å£å’Œæ•°æ®ç›®å½•ï¼š

- ç«¯å£å·ï¼šç¬¬ 7 è¡Œ**å†’å·**å·¦ä¾§çš„ `8080` è¡¨ç¤ºå¯¹å¤–æš´éœ²çš„ç«¯å£å·ï¼Œå¦‚å…¶ä»–ç¨‹åºå ç”¨ï¼Œåˆ™è¯·ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·ã€‚
- æ•°æ®ç›®å½•ï¼šç¬¬ 11 è¡Œçš„ `- '/root/zfile-pro/file:/data/file'` ä¸ºæ˜ å°„å®¿ä¸»æœºæ–‡ä»¶å¤¹ `/root/zfile-pro/file` åˆ°å®¹å™¨å†…çš„ `/data/file` æ–‡ä»¶å¤¹ï¼Œè¿™æ ·éœ€è¦åœ¨ ZFile æ·»åŠ æœ¬åœ°å­˜å‚¨æ—¶ï¼Œå¡«å†™å®¹å™¨å†…ç›®å½• `/data/file` å°±ç­‰åŒäºè®¿é—®å®¿ä¸»æœºçš„ `/root/zfile-pro/file` ç›®å½•äº†ã€‚ è¿™ä¸€è¡ŒæŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹ï¼Œå¦‚æœä¸éœ€è¦æ˜ å°„æœ¬åœ°å­˜å‚¨ï¼Œåˆ™å¯ä»¥åˆ é™¤è¿™ä¸€è¡Œã€‚

:::


<Tabs groupId="image-src">
    <TabItem value="dockerhub" label="DockerHub">
```yml showLineNumbers {7,11}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
        image: zhaojun1998/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-bj" label="åŒ—äº¬é•œåƒ">
```yml showLineNumbers {7,11}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
        image: swr.cn-north-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-hk" label="é¦™æ¸¯é•œåƒ">
```yml showLineNumbers {7,11}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
        image: swr.ap-southeast-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>
</Tabs>



### é…ç½®æ–‡ä»¶æ˜ å°„ {#config2}

**å¦‚éœ€æ˜ å°„é…ç½®æ–‡ä»¶**åˆ™éœ€è¦å…ˆåœ¨å®¿ä¸»æœºä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åæ˜ å°„åˆ°å®¹å™¨å†…:
ä¸‹è½½ [`application.properties`](https://c.jun6.net/ZFILE-PRO/application.properties) æ–‡ä»¶åˆ° `/root` ç›®å½•ä¸‹, æ­¤ç›®å½•å¯è‡ªè¡Œæ›´æ”¹, å‘½ä»¤å¦‚:

```bash showLineNumbers
curl -k -o /root/application.properties https://c.jun6.net/ZFILE-PRO/application.properties
```

**ç„¶åå¢åŠ ä¸€ä¸ª `-v` å‚æ•°(è§ä¸‹é¢å€’æ•°ç¬¬äºŒè¡Œ)ï¼Œå°†æ­¤æºæ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨å†…ï¼ˆå¦‚ä¿®æ”¹å®¿ä¸»æœºçš„ `application.properties` ä¸ºå…¶ä»–è·¯å¾„, åˆ™ä¸‹é¢å‘½ä»¤ä¹Ÿè¦ä¸€èµ·ä¿®æ”¹ï¼‰, å¦‚:**

> æç¤º: å¯åŠ¨å®¹å™¨åæ— æ³•ä¿®æ”¹æ–‡ä»¶æ˜ å°„ï¼Œéœ€å…ˆ `docker rm -f zfile-pro` åˆ é™¤å®¹å™¨ï¼Œå†é‡æ–°è¿è¡Œå‘½ä»¤.

<Tabs groupId="image-src">
    <TabItem value="dockerhub" label="DockerHub">
```yml showLineNumbers {12}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
            - '/root/application.properties:/root/application.properties'
        image: zhaojun1998/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-bj" label="åŒ—äº¬é•œåƒ">
```yml showLineNumbers {12}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
            - '/root/application.properties:/root/application.properties'
        image: swr.cn-north-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>

    <TabItem value="swr-hk" label="é¦™æ¸¯é•œåƒ">
```yml showLineNumbers {12}
version: '3.3'
services:
    zfile:
        container_name: zfile-pro
        restart: always
        ports:
            - '8080:8080'
        volumes:
            - '/root/zfile-pro/db:/root/.zfile-v4/db'
            - '/root/zfile-pro/logs:/root/.zfile-v4/logs'
            - '/root/zfile-pro/file:/data/file'
            - '/root/application.properties:/root/application.properties'
        image: swr.ap-southeast-1.myhuaweicloud.com/zfile-dev/zfile-pro:latest
```
    </TabItem>
</Tabs>


-----


## æ›´æ–°ç‰ˆæœ¬

### æ‰‹åŠ¨æ›´æ–°

> å•æ¬¡æ‰‹åŠ¨æ›´æ–°åç§°ä¸º `zfile-pro` çš„å®¹å™¨

```bash showLineNumbers
docker run --rm \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower \
    --cleanup \
    --run-once \
    zfile-pro
```

### è‡ªåŠ¨æ›´æ–°

> æ¯ 3600 ç§’ ï¼ˆ1å°æ—¶ï¼‰è‡ªåŠ¨æ£€æµ‹æ›´æ–°åç§°ä¸º `zfile-pro` çš„å®¹å™¨

```bash showLineNumbers
docker run -d \
    --name watchtower \
    --restart always \
    -v /var/run/docker.sock:/var/run/docker.sock \
    containrrr/watchtower \
    --cleanup \
    zfile-pro \
    -i 3600
```

## å¸®æˆ‘å®‰è£…ğŸ”
[æŠ€æœ¯æ”¯æŒ](/support/)
